<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Search List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/searchList.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="icon" type="image/jpg" href="/source/index/favicon-32x32.png"/>
    <script src="/js/functions.js"></script>
</head>
<body>
<div class="opacity">

    <nav>
        <div class="logo">
            <img src="/source/index/logo.png" alt="Logo">
        </div>
        <div class="search-bar">
            <form th:action="@{/productos/search}">
                <input id="formulario" type="text" placeholder="Buscar..." name="filter">
                <button id="btSearch" type="submit"><img src="/source/index/lupa.png"  height="30px" width="auto"></button>
            </form>
        </div>
        <div class="nav-buttons">
            <form method="post" th:action="@{/cesta}">
                <button type="submit"><img src="/source/index/cesta.png" alt="Boton cesta"></button>
            </form>
            <a href="#"><img src="/source/index/perfil.png" alt="Boton perfil"></a>
        </div>
    </nav>

    <div class="topnav" id="myTopnav">
        <a th:href="@{/}">Inicio</a>
        <a th:href="@{/proteinas}">Proteinas</a>
        <a th:href="@{/carbos}">Carbohidratos</a>
        <a th:href="@{/creatinas}">Creatina</a>
        <a th:href="@{/vitaminas}">Vitaminas</a>
        <a th:href="@{/aminoacidos}">Aminoacidos</a>
        <a th:href="@{/barritas}">Barritas</a>
        <a th:href="@{/otros}">Otros</a>
        <a href="javascript:void(0);" class="icon" onclick="myFunction()">
            <i class="fa fa-bars"></i>
        </a>
    </div>

    <div class="titulo">
        <img id="openNav" src="/source/index/hamburguer_button.png">
        <h1>Search List</h1>
    </div>
</div>


    <!--    Barra lateral desplegable-->
    <div id="myNav" class="sidenav">
        <h3 class="filter-heading">Filtros</h3>
        <ul class="filter-list">
            <li>
                <label for="nombre">Nombre</label>
                <div class="filter-input">
                    <select id="nombre">
                        <option value="">Seleccione...</option>
                        <option value="vino">Whey Protein</option>
                        <option value="cerveza">Isolate Protein</option>
                        <option value="licor">Pee Protein</option>
                    </select>
                </div>
            </li>
            <li>
                <label for="type">Tipo</label>
                <div class="filter-input">
                    <select id="type">
                        <option value="">Seleccione...</option>
                        <option value="vino">Isolatada</option>
                        <option value="cerveza">Whey</option>
                        <option value="licor">Hidrolizada</option>
                    </select>
                </div>
            </li>
            <li>
                <label for="flavour">Sabor</label>
                <div class="filter-input">
                    <select id="flavour">
                        <option value="">Seleccione...</option>
                        <option value="dulce">Chocolate</option>
                        <option value="amargo">Vainilla</option>
                        <option value="acido">Arandano</option>
                    </select>
                </div>
            </li>
            <li>
                <label for="volume">Volumen</label>
                <div class="filter-input">
                    <select id="volume">
                        <option value="">Seleccione...</option>
                        <option value="750ml">0.5Kg</option>
                        <option value="500ml">1Kg</option>
                        <option value="330ml">2Kg</option>
                    </select>
                </div>
            </li>
            <li>
                <label for="price">Precio</label>
                <div class="filter-input">
                    <select id="price">
                        <option value="">Seleccione...</option>
                        <option value="10-20">10€ - 20€</option>
                        <option value="20-30">20€ - 30€</option>
                        <option value="30-50">30€ - 50€</option>
                    </select>
                </div>
            </li>
        </ul>
        <button class="btBuscar">Filtrar</button>
    </div>

    <!--    Barra de filtros-->
    <div class="sidebar">
        <h3 class="filter-head">Filtros</h3>
        <ul class="list-filter">
            <li>
                <label for="name">Nombre</label>
                <select id="name">
                    <option value="">Seleccione...</option>
                    <option value="vino">Whey Protein</option>
                    <option value="cerveza">Isolate Protein</option>
                    <option value="licor">Pee Protein</option>
                </select>
            </li>
            <li>
                <label for="tipo">Tipo</label>
                <select id="tipo">
                    <option value="">Seleccione...</option>
                    <option value="vino">Isolatada</option>
                    <option value="cerveza">Whey</option>
                    <option value="licor">Hidrolizada</option>
                </select>
            </li>
            <li>
                <label for="sabor">Sabor</label>
                <select id="sabor">
                    <option value="">Seleccione...</option>
                    <option value="dulce">Chocolate</option>
                    <option value="amargo">Vainilla</option>
                    <option value="acido">Arandano</option>
                </select>
            </li>
            <li>
                <label for="volumen">Volumen</label>
                <select id="volumen">
                    <option value="">Seleccione...</option>
                    <option value="750ml">0.5Kg</option>
                    <option value="500ml">1Kg</option>
                    <option value="330ml">2Kg</option>
                </select>
            </li>
            <li>
                <label for="precio">Precio</label>
                <select id="precio">
                    <option value="">Seleccione...</option>
                    <option value="10-20">10€ - 20€</option>
                    <option value="20-30">20€ - 30€</option>
                    <option value="30-50">30€ - 50€</option>
                </select>
            </li>
        </ul>
        <button class="btFiltrar">Filtrar</button>
    </div>

<div class="opacity">
    <div class="productos">
        <div th:each="producto:${productos}" class="prodSearch">
            <div th:each="proteina : ${producto.proteinas}">
                <a th:href="@{/proteina/{id}(id=${proteina.id})}">
                    <div class="divProductos">
                        <img th:src="${proteina.imagenUrl}">
                        <p th:text="${proteina.nombre}" class="nombre"></p>
                        <span>Marca</span>
                        <span th:text="${proteina.marca}"></span>
                        <div class="precio">
                            <span >Desde:</span>
                            <span th:text="${proteina.precio}"></span>
                            <span>€</span>
                        </div>
                    </div>
                </a>
            </div>

            <div th:each="aminoacido : ${producto.aminoacidos}">
                <a href="#">
                    <div class="divProductos">
                        <img th:src="${aminoacido.imagenUrl}">
                        <p th:text="${aminoacido.nombre}" class="nombre"></p>
                        <span>Marca</span>
                        <span th:text="${aminoacido.marca}"></span>
                        <div class="precio">
                            <span >Desde:</span>
                            <span th:text="${aminoacido.precio}"></span>
                            <span>€</span>
                        </div>
                    </div>
                </a>
            </div>

            <div th:each="barrita : ${producto.barritas}">
                <a href="#">
                    <div class="divProductos">
                        <img th:src="${barrita.imagenUrl}">
                        <p th:text="${barrita.nombre}" class="nombre"></p>
                        <span>Marca</span>
                        <span th:text="${barrita.marca}"></span>
                        <div class="precio">
                            <span >Desde:</span>
                            <span th:text="${barrita.precio}"></span>
                            <span>€</span>
                        </div>
                    </div>
                </a>
            </div>

            <div th:each="carbohidrato : ${producto.carbohidratos}">
                <a href="#">
                    <div class="divProductos">
                        <img th:src="${carbohidrato.imagenUrl}">
                        <p th:text="${carbohidrato.nombre}" class="nombre"></p>
                        <span>Marca</span>
                        <span th:text="${carbohidrato.marca}"></span>
                        <div class="precio">
                            <span >Desde:</span>
                            <span th:text="${carbohidrato.precio}"></span>
                            <span>€</span>
                        </div>
                    </div>
                </a>
            </div>

            <div th:each="vitamina : ${producto.vitaminas}">
                <a href="#">
                    <div class="divProductos">
                        <img th:src="${vitamina.imagenUrl}">
                        <p th:text="${vitamina.nombre}" class="nombre"></p>
                        <span>Marca</span>
                        <span th:text="${vitamina.marca}"></span>
                        <div class="precio">
                            <span >Desde:</span>
                            <span th:text="${vitamina.precio}"></span>
                            <span>€</span>
                        </div>
                    </div>
                </a>
            </div>


        </div>
    </div>
</div>

<script>

document.addEventListener('DOMContentLoaded', function() {
  verificarDivOpacity();
});

<!--Despliega la barra lateal-->
    document.getElementById("openNav").addEventListener("click", function() {
		document.getElementById("myNav").style.width = "250px";
		document.getElementById("myNav").style.opacity = "1";

		var elementos = document.getElementsByClassName("opacity");

        for (var i = 0; i < elementos.length; i++) {
            elementos[i].style.opacity = "0.2";
        }
});

<!--Cierra la barra lateral-->
document.addEventListener("click", function(event) {
   var sidenav = document.getElementById("myNav");
   var openNavButton = document.getElementById("openNav");
   var isInsideNav = event.target.closest('#myNav') !== null;
   if (event.target !== sidenav && event.target !== openNavButton && !isInsideNav) {
       sidenav.style.width = "0";

       var elementos = document.getElementsByClassName("opacity");

        for (var i = 0; i < elementos.length; i++) {
            elementos[i].style.opacity = "1";
        }
   }
});

// Obtener los elementos div por su clase
var divs = document.getElementsByClassName("prodSearch");

// Convertir la lista de elementos a un array para poder recorrerla
var divsArray = Array.from(divs);

// Recorrer la lista de elementos
divsArray.forEach(function(div) {
    // Verificar si el contenido del div está vacío
    if (div.innerHTML.trim() === "") {
        // Eliminar el div
        div.remove();
    }
});

function verificarDivOpacity() {
  var opacityDiv = document.querySelector('.productos');

  // Verificar si el elemento no existe o está vacío
  if (!opacityDiv || opacityDiv.childElementCount === 0) {
    alert('El div con clase "opacity" está vacío o no existe');
    window.location.href = "http://localhost:8081/";
    return;
  }

  // Verificar si el elemento tiene elementos ocultos
  var productosDivs = opacityDiv.querySelectorAll('.prodSearch');
  var tieneElementosOcultos = false;

  for (var i = 0; i < productosDivs.length; i++) {
    if (productosDivs[i].offsetParent === null) {
      tieneElementosOcultos = true;
      break;
    }
  }

  if (tieneElementosOcultos) {
    alert('El div con clase "opacity" contiene elementos ocultos');
    window.location.href = "http://localhost:8081/";
  }
}





</script>

</body>
<footer>

    <div class="container">
        <div class="footer-column">
            <div class="footer-logo">
                <img src="/source/index/logo.png" alt="Logo de la empresa">
            </div>
            <div class="footer-about">
                <h3>Sobre Nosotros</h3>
                <p>Somos una empresa dedicada a la venta de suplementos alimenticios de alta calidad.</p>
            </div>
            <div class="footer-social">
                <h3>Síguenos en Redes Sociales</h3>
                <ul>
                    <li><img src="/source/index/logoFacebook.png" alt="logo Facebook" width="5%"></i><a>Facebook</a></li>
                    <li><img src="/source/index/logoTwitter.png" alt="logo Twitter" width="5%"></i> <a>Twitter</a></li>
                    <li><img src="/source/index/logoInsta.png" alt="logo Instagram" width="5%"></i> <a>Instagram</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-column">
            <div class="footer-links">
                <h3>Enlaces Útiles</h3>
                <ul>
                    <li><a th:href="@{/}">Inicio</a></li>
                    <li><a th:href="@{/proteinas}">Proteinas</a></li>
                    <li><a th:href="@{/carbos}">Carbohidratos</a></li>
                    <li><a th:href="@{/vitaminas}">Vitaminas</a></li>
                    <li><a th:href="@{/barritas}">Barritas</a></li>
                    <li><a th:href="@{/otros}">Otros</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-column">
            <div class="footer-contact">
                <h3>Contacto</h3>
                <p>Dirección: Calle Falsa 123, Ciudad Ficticia</p>
                <p>Teléfono: (123) 456-7890</p>
                <p>Correo electrónico: info@suplementos.com</p>
            </div>
            <div class="footer-payment">
                <h3>Formas de Pago</h3>
                <img src="/source/index/MasterCard_Logo.png" alt="Logos de formas de pago" width="20%">
            </div>
        </div>
    </div>
    <div class="bottom-footer">
        <div class="container">
            <div class="bottom-footer-left">
                <p>Derechos Reservados © 2023 Suplementos.com</p>
            </div>
            <div class="bottom-footer-right">
                <ul>
                    <li><a href="#">Términos y Condiciones</a></li>
                    <li><a href="#">Política de Privacidad</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
</html>